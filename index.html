<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to Sandeep's Heart</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&family=Allura&display=swap">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        /* CSS variables for night mode (default) */
        :root {
            --body-bg-color: #000000;
            --text-color: #ffffff;
            --button-bg-color: #1f2937;
            --glow-color-1: #ec4899;
            --glow-color-2: #f43f5e;
            --button-gradient: linear-gradient(to right, #ec4899, #f43f5e);
        }

        /* Day mode styles - will be applied when the 'day-mode' class is active */
        body.day-mode {
            --body-bg-color: #f3f4f6; /* Light gray */
            --text-color: #000000;
            --button-bg-color: #56A0D3; /* Sky blue buttons */
            --glow-color-1: #ff69b4; /* Hot Pink */
            --glow-color-2: #ff1493; /* Deep Pink */
            --button-gradient: linear-gradient(to right, #ff69b4, #ff1493);
            background-color: var(--body-bg-color);
            color: var(--text-color);
        }

        /* Custom styles for the body, background, and animations */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--body-bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            text-align: center;
            transition: background-color 0.5s ease-in-out, color 0.5s ease-in-out;
        }

        /* The 3D canvas will be positioned behind all content */
        #threeCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            transition: opacity 0.5s ease-in-out;
        }
        
        body.day-mode #threeCanvas {
            opacity: 0;
        }

        /* Day mode background */
        #dayBackground {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background-color: #87CEEB; /* Sky Blue background */
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        body.day-mode #dayBackground {
            opacity: 1;
        }

        /* Center the content container and apply the parallax effect */
        .content-container {
            position: relative;
            z-index: 1;
            padding: 2rem;
            max-width: 48rem;
            width: 100%;
            transition: transform 0.1s ease-out; /* Parallax smooth transition */
        }
        
        /* Apply the Allura font and glow to the title */
        .main-title {
            font-family: 'Allura', cursive;
            animation: text-glow 4s ease-in-out infinite;
            color: var(--glow-color-1);
        }
        
        /* The paragraph text will also be colored by the theme */
        .content-container p {
            color: var(--text-color);
        }

        /* Keyframes for the title glow animation */
        @keyframes text-glow {
            0%, 100% {
                text-shadow: 0 0 8px var(--glow-color-1), 0 0 16px var(--glow-color-1), 0 0 24px var(--glow-color-1);
            }
            50% {
                text-shadow: 0 0 12px var(--glow-color-2), 0 0 24px var(--glow-color-2), 0 0 36px var(--glow-color-2);
            }
        }

        /* Heart SVG styles and pulse animation */
        .heart-icon {
            width: 100px;
            height: 100px;
            margin: 0 auto 1.5rem;
            fill: var(--glow-color-1);
            animation: pulse-heart 2s infinite;
        }
        @keyframes pulse-heart {
            0%, 100% {
                transform: scale(1);
                filter: drop-shadow(0 0 10px var(--glow-color-2));
            }
            50% {
                transform: scale(1.1);
                filter: drop-shadow(0 0 20px var(--glow-color-1));
            }
        }
        
        /* Button styles with gradient border and hover effect */
        .action-button {
            border: 2px solid transparent;
            background-image: linear-gradient(var(--button-bg-color), var(--button-bg-color)), var(--button-gradient);
            background-origin: border-box;
            background-clip: padding-box, border-box;
            transition: transform 0.3s, box-shadow 0.3s;
            animation: pulse-border 2s infinite;
            color: var(--text-color);
        }
        .action-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(236, 72, 153, 0.6);
        }
        .action-button:active {
            transform: scale(0.95);
        }

        @keyframes pulse-border {
            0%, 100% {
                border-color: var(--glow-color-2);
            }
            50% {
                border-color: var(--glow-color-1);
            }
        }

        /* Styles for shooting stars */
        .shooting-star {
            position: absolute;
            background: linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0));
            border-radius: 50%;
            height: 2px;
            pointer-events: none;
            opacity: 0;
            animation: star-fall linear infinite;
        }

        @keyframes star-fall {
            0% {
                opacity: 0;
                transform: rotate(-45deg) translateX(0);
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: rotate(-45deg) translateX(400px);
            }
        }
        
        /* Styles for the new light bloom animation */
        .light-bloom {
            position: fixed;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 999;
            animation: bloom-fade-out 0.8s ease-out forwards;
        }
        @keyframes bloom-fade-out {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
                box-shadow: 0 0 10px currentColor, 0 0 20px currentColor, 0 0 40px currentColor;
            }
            100% {
                width: 200px;
                height: 200px;
                opacity: 0;
                box-shadow: 0 0 50px currentColor, 0 0 100px currentColor, 0 0 150px currentColor;
            }
        }

        /* Styles for the day/night toggle button */
        #day-night-toggle {
            position: fixed;
            top: 2rem;
            right: 2rem;
            z-index: 1000;
            cursor: pointer;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 2px solid var(--text-color);
            background-color: var(--button-bg-color);
            transition: background-color 0.5s ease-in-out, border-color 0.5s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 10px var(--glow-color-1);
        }

        #day-night-toggle svg {
            width: 24px;
            height: 24px;
            fill: var(--text-color);
            transition: fill 0.5s ease-in-out;
        }
    </style>
</head>
<body class="bg-black text-white">

    <div id="threeCanvas"></div>

    <div id="dayBackground"></div>
    
    <button id="day-night-toggle">
        <svg class="sun hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
    </button>

    <main id="main-content" class="content-container mx-auto flex-grow flex flex-col items-center justify-center">
        <svg class="heart-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
        </svg>

        <h1 class="main-title text-6xl sm:text-7xl lg:text-8xl font-extrabold mb-4 tracking-tight leading-tight">
            Sandeep's Heart
        </h1>
        <p class="text-xl sm:text-2xl mb-10">
            A personal space, a beautiful animation.
        </p>
        <button id="dive-in-button" class="action-button font-bold py-3 px-8 rounded-full shadow-lg">
            Dive Into Sandeep's Heart
        </button>
    </main>

    <footer class="w-full text-center p-6 text-gray-500 z-10 relative">
        <p class="text-sm">
            Built by <a href="https://t.me/HackerXBhai" class="text-blue-400 hover:underline">@HackerXBhai</a>. The source code is available on <a href="https://t.me/HackerXBhai" class="text-blue-400 hover:underline">Telegram</a>.
        </p>
    </footer>

    <script>
    // Get the button element by its ID.
    const diveinbutton = document.getElementById('dive-in-button');
    const dayNightToggleBtn = document.getElementById('day-night-toggle');
    const body = document.body;

    // Define color palettes for both day and night modes
    const palettes = [
        { // Pink/Red (Night default)
            glow1: '#ec4899', 
            glow2: '#f43f5e',
            gradient: 'linear-gradient(to right, #ec4899, #f43f5e)',
            dayGlow1: '#ff69b4', // Hot Pink
            dayGlow2: '#ff1493', // Deep Pink
            dayGradient: 'linear-gradient(to right, #ff69b4, #ff1493)'
        },
        { // Blue/Purple (Night)
            glow1: '#3b82f6',
            glow2: '#a855f7',
            gradient: 'linear-gradient(to right, #3b82f6, #a855f7)',
            dayGlow1: '#63b3ed', // Light Blue
            dayGlow2: '#805ad5', // Violet
            dayGradient: 'linear-gradient(to right, #63b3ed, #805ad5)'
        },
        { // Emerald/Cyan (Night)
            glow1: '#10b981',
            glow2: '#22d3ee',
            gradient: 'linear-gradient(to right, #10b981, #22d3ee)',
            dayGlow1: '#48bb78', // Medium Green
            dayGlow2: '#4fd1c5', // Teal
            dayGradient: 'linear-gradient(to right, #48bb78, #4fd1c5)'
        },
        { // Teal/Aqua (Night)
            glow1: '#20c997',
            glow2: '#29d0d3',
            gradient: 'linear-gradient(to right, #20c997, #29d0d3)',
            dayGlow1: '#4fd1c5', // Teal
            dayGlow2: '#667eea', // Indigo
            dayGradient: 'linear-gradient(to right, #4fd1c5, #667eea)'
        },
        { // Deep Purple/Magenta (Night)
            glow1: '#5b21b6',
            glow2: '#c026d3',
            gradient: 'linear-gradient(to right, #5b21b6, #c026d3)',
            dayGlow1: '#805ad5', // Violet
            dayGlow2: '#d53f8c', // Ruby
            dayGradient: 'linear-gradient(to right, #805ad5, #d53f8c)'
        },
        { // Hot Pink/Deep Pink (Night)
            glow1: '#ff69b4',
            glow2: '#ff1493',
            gradient: 'linear-gradient(to right, #ff69b4, #ff1493)',
            dayGlow1: '#f687b3', // Light Pink
            dayGlow2: '#e53e3e', // Red
            dayGradient: 'linear-gradient(to right, #f687b3, #e53e3e)'
        },
        { // Gold/Amber (Night)
            glow1: '#FFD700',
            glow2: '#FFC107',
            gradient: 'linear-gradient(to right, #FFD700, #FFC107)',
            dayGlow1: '#F6E05E', // Light Gold
            dayGlow2: '#FEEBC8', // Light Amber
            dayGradient: 'linear-gradient(to right, #F6E05E, #FEEBC8)'
        }
    ];
    let currentPaletteIndex = 0;
    const mainContent = document.getElementById('main-content');

    // Function to apply the current color palette
    function applyPalette(index) {
        const root = document.documentElement;
        const current = palettes[index];
        const isDayMode = body.classList.contains('day-mode');
        
        const glow1 = isDayMode ? current.dayGlow1 : current.glow1;
        const glow2 = isDayMode ? current.dayGlow2 : current.glow2;
        const gradient = isDayMode ? current.dayGradient : current.gradient;

        root.style.setProperty('--glow-color-1', glow1);
        root.style.setProperty('--glow-color-2', glow2);
        root.style.setProperty('--button-gradient', gradient);
        
        // Set the color directly for the title and let the CSS handle the glow
        const mainTitle = document.querySelector('.main-title');
        mainTitle.style.color = isDayMode ? glow1 : glow1;
    }

    // Add a click event listener to the button.
    if (diveinbutton) {
        diveinbutton.addEventListener('click', () => {
            // Set a flag in sessionStorage to indicate the user is coming from the index page.
            sessionStorage.setItem('fromIndex', 'true');

            // Redirect the user to the main page.
            window.location.href = 'main.html';
        });
    }

    // Function to create a light bloom animation on click
    function createLightBloom(x, y) {
        // Only create the bloom in day mode
        if (!body.classList.contains('day-mode')) {
            return;
        }
        const bloom = document.createElement('div');
        bloom.classList.add('light-bloom');
        bloom.style.top = `${y}px`;
        bloom.style.left = `${x}px`;
        const currentPalette = palettes[currentPaletteIndex];
        const bloomColor = currentPalette.dayGlow1;
        bloom.style.color = bloomColor; // Use currentColor to pass the glow color
        document.body.appendChild(bloom);
        
        setTimeout(() => {
            bloom.remove();
        }, 800); // Remove the element after the animation is finished
    }

    // Event listener for the light bloom effect on the entire page
    document.addEventListener('click', (event) => {
        createLightBloom(event.clientX, event.clientY);
    });

    // --- Core Day/Night Logic ---
    function toggleDayNightMode() {
        body.classList.toggle('day-mode');
        const sunIcon = dayNightToggleBtn.querySelector('.sun');
        const moonIcon = dayNightToggleBtn.querySelector('.moon');
        
        if (body.classList.contains('day-mode')) {
            sunIcon.classList.remove('hidden');
            moonIcon.classList.add('hidden');
        } else {
            sunIcon.classList.add('hidden');
            moonIcon.classList.remove('hidden');
        }
        // Re-apply the current color palette to update glows for the new mode
        applyPalette(currentPaletteIndex);
    }

    if (dayNightToggleBtn) {
        dayNightToggleBtn.addEventListener('click', toggleDayNightMode);
    }
    
    // --- 3D Starfield Background Script with Three.js ---
    let scene, camera, renderer, starGeo, stars;
    let mouseX = 0, mouseY = 0;

    // Function to create and initialize the 3D scene
    function initThreeJS() {
        // Set up scene, camera, and renderer
        if (!THREE) {
            console.error('Three.js library is not loaded. Cannot initialize animation.');
            return;
        }
        
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 1000);
        camera.position.z = 1;
        camera.rotation.x = Math.PI / 2;

        renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.domElement.style.position = 'fixed';
        renderer.domElement.style.top = '0';
        renderer.domElement.style.left = '0';
        renderer.domElement.style.zIndex = '-1';
        document.getElementById('threeCanvas').appendChild(renderer.domElement);

        // Create geometry for the stars
        starGeo = new THREE.BufferGeometry();
        const starCount = 5000;
        const positions = [];
        const velocities = [];
        for (let i = 0; i < starCount; i++) {
            positions.push((Math.random() - 0.5) * 600, (Math.random() - 0.5) * 600, (Math.random() - 0.5) * 600);
            velocities.push(0, 0, Math.random() * 0.2 + 0.1);
        }
        starGeo.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
        starGeo.setAttribute('velocity', new THREE.Float32BufferAttribute(velocities, 3));

        // Create material for the stars (glowing effect)
        const starMaterial = new THREE.PointsMaterial({
            color: 0xaaaaaa,
            size: 0.7,
            transparent: true,
            opacity: 0.8
        });

        // Create the stars object
        stars = new THREE.Points(starGeo, starMaterial);
        scene.add(stars);

        // Add event listeners for mouse interaction
        document.addEventListener('mousemove', onMouseMove, false);
        window.addEventListener('resize', onWindowResize, false);
    }

    // Function to handle window resizing
    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    }

    // Function to handle mouse movement for camera and parallax control
    function onMouseMove(event) {
        mouseX = (event.clientX / window.innerWidth) * 2 - 1;
        mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
    }

    // Function to create a shooting star
    function createShootingStar() {
        const star = document.createElement('div');
        star.classList.add('shooting-star');
        star.style.width = `${Math.random() * 50 + 50}px`;
        star.style.top = `${Math.random() * window.innerHeight}px`;
        star.style.left = `${Math.random() * window.innerWidth}px`;
        star.style.animationDuration = `${Math.random() * 2 + 1}s`;
        star.style.animationDelay = `${Math.random() * 2}s`;
        document.body.appendChild(star);
        
        // Remove the star after its animation completes
        setTimeout(() => {
            star.remove();
        }, (Math.random() * 2 + 1) * 1000 + (Math.random() * 2) * 1000);
    }

    // --- Animation Loop ---
    function animate() {
        requestAnimationFrame(animate);

        // Only run the starfield animation in night mode
        if (!body.classList.contains('day-mode')) {
            // Update star positions to create movement
            const positions = starGeo.attributes.position.array;
            const velocities = starGeo.attributes.velocity.array;
            for (let i = 0; i < positions.length; i += 3) {
                positions[i + 2] += velocities[i + 2];
                if (positions[i + 2] > camera.position.z) {
                    positions[i + 2] = -600;
                    velocities[i + 2] = Math.random() * 0.2 + 0.1;
                }
            }
            starGeo.attributes.position.needsUpdate = true;
    
            // Animate camera based on mouse position
            camera.position.x += (mouseX * 0.5 - camera.position.x) * 0.05;
            camera.position.y += (mouseY * 0.5 - camera.position.y) * 0.05;
            camera.lookAt(scene.position);
    
            // Parallax effect on the main content
            const mainContent = document.getElementById('main-content');
            const parallaxX = mouseX * 20; // Adjust multiplier for effect strength
            const parallaxY = mouseY * 20; // Adjust multiplier for effect strength
            mainContent.style.transform = `translate(${parallaxX}px, ${parallaxY}px)`;
    
            renderer.render(scene, camera);
        }
    }

    // Start the application on window load
    window.onload = function() {
        initThreeJS();
        animate();
        
        // Periodically create a shooting star
        setInterval(createShootingStar, 5000);
        
        // Initial call to apply the color palette
        applyPalette(currentPaletteIndex);
    };
    </script>
</body>
</html>
